(this["webpackJsonpterminal-mama"]=this["webpackJsonpterminal-mama"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(65),c=a.n(s),o=(a(77),a(14)),i=a(15),l=a(17),u=a(16),m=a(61),p=a(8),h=a(40),d=(a(28),a(57)),f=a.n(d);f.a.initializeApp({apiKey:"AIzaSyCV7q9QR3QI2B041SeKSwcGqUTr50w9EzA",authDomain:"expensasterminal.firebaseapp.com",databaseURL:"https://expensasterminal.firebaseio.com",projectId:"expensasterminal",storageBucket:"expensasterminal.appspot.com",messagingSenderId:"1007415415937",appId:"1:1007415415937:web:85b58e1389152342d96980"});var v=f.a.auth,b=f.a.database(),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:v().currentUser},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-per"},r.a.createElement("ul",{className:"nav-links"},this.state.user&&"graciela.barone.ohf@gmail.com"===this.state.user.email?r.a.createElement(h.b,{to:"/expensas"},r.a.createElement("li",null,"Expensas")):r.a.createElement("li",null,"Locales")))}}]),a}(n.Component);var g=function(){return r.a.createElement("h1",null,"Home")},x=a(4),j=a.n(x),y=a(11),O=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],k=function(e){var t=e-1;return 12===t&&(t=0),O[t]},w=a(10),S=a(105),N=a(107),C=a(51),I=a(66);var L=function(e){var t=[];if(e.data)for(var a in e.data.info){var n={title:e.data.info[a].name,value:e.data.info[a].value};t.push(n)}var s=parseInt(e.data.total)*parseInt(e.porcentaje)/100;return t.push({title:"  ",value:" "}),t.push({title:"Total",value:e.data.total}),t.push({title:"Porcentaje "+e.porcentaje+"%",value:s}),r.a.createElement(N.a,{backgroundColor:"#407088",color:"white",className:"btn-pdf",onClick:function(){var a="expensa".concat(e.porcentaje,".pdf"),n={title:"Expensas mes "+k(parseInt(e.data.mes))};!function(e){var t=e.data,a=e.headers,n=e.filename,r=e.extraInfo,s=new I.a({orientation:"l",unit:"pt",format:"a4"}),c=841.89-50,o=595.28-50,i=[];s.setFontSize(20),s.text(r.title,300,50),s.setFontSize(15);a.forEach((function(e,t){if(e.hasOwnProperty("xPos"))s.text(e.label,e.xPos,100),i.push(e.xPos);else{var n=50+t*(c/a.length);s.text(e.label,0===t?n:n+10,100),i.push(0===t?n:n+10)}})),s.line(100,105,c-50,105);var l=130;t.forEach((function(e,t){var n=[];a.forEach((function(t,a){var r=s.splitTextToSize(String(e[t.key]),i[a]-i[0!==a&&a-1]),c=r.length*s.getLineHeight();n.push(c),s.text(r,i[a],l)})),(l=l+10+Math.max.apply(Math,n.concat([30])))>o&&(s.addPage(),l=110)})),s.line(100,l-15,c-50,l-15),s.save(n)}({data:t,headers:[{key:"title",label:" ",xPos:200},{key:"value",label:" ",xPos:500}],filename:a,extraInfo:n})}},e.btnName?e.btnName:e.porcentaje)};var P=function(e){return console.log(e),r.a.createElement(w.a,{p:4,className:"download-buttons"},r.a.createElement(L,{porcentaje:20,data:e.data}),r.a.createElement(L,{porcentaje:16,data:e.data}),r.a.createElement(L,{porcentaje:17,data:e.data}),r.a.createElement(L,{porcentaje:30,data:e.data}))},M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:v().currentUser,meses:[],readError:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null});try{b.ref("expensas").on("value",(function(e){var a=[];e.forEach((function(e){var t=e.val();t.key=e.key,console.log(t),a.push(t)})),t.setState({meses:a}),console.log(a)}))}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteExpensa",value:function(e){console.log(e);try{b.ref("expensas").child(e).remove()}catch(t){console.log("Error al eliminar"),console.log(t)}}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{p:4},r.a.createElement("h1",{className:"sub-title"},"Expensas"),r.a.createElement(S.b,{className:"list-expensa"},this.state.meses.map((function(t){return r.a.createElement(S.a,{className:"list-expensa-row"},r.a.createElement("div",{className:"list-expensa-row-elem"},r.a.createElement("h3",null,k(parseInt(t.mes)))),r.a.createElement("div",{className:"list-expensa-row-elem list-expensa-btns"},t.info?r.a.createElement(P,{data:t}):".",r.a.createElement(N.a,{variantColor:"red",variant:"solid",onClick:function(){return e.deleteExpensa(t.key)}},r.a.createElement(C.a,{name:"delete",size:"20px",color:"white"}))))}))),r.a.createElement(h.b,{to:"/expensas/crear",className:"crear-expensa-btn"},r.a.createElement(C.a,{name:"add",size:"20px",color:"red.500"}),"Crear nuevo mes"))}}]),a}(n.Component),z=a(70),A=a(108),D=a(56),F=a(109),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(A.a,{columns:2,spacingX:"40px",spacingY:"20px"},r.a.createElement(D.a,{isInvalid:this.props.errors.name},r.a.createElement(F.a,{name:this.props.i+".name",placeholder:"Nombre",defaultValue:this.props.name,ref:this.props.register({validate:!0})})),r.a.createElement(D.a,{isInvalid:this.props.errors.name},r.a.createElement(F.a,{name:this.props.i+".value",placeholder:"Valor",defaultValue:this.props.value,ref:this.props.register({validate:!0})})))}}]),a}(n.Component);var U=function(e){var t=Object(z.a)(),a=t.handleSubmit,n=t.errors,s=t.register,c=t.formState;function o(){return(o=Object(y.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,t.prev=1,t.next=4,b.ref("expensas").push({info:a,date:n,mes:n.getMonth(),anio:n.getFullYear(),total:i(a),uid:e.user.uid});case 4:alert("Expensa creada correctamente!"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),console.log("Fall\xf3");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}function i(e){var t=0;for(var a in e)t+=parseInt(e[a].value);return t}function l(e){console.log(e),function(e){o.apply(this,arguments)}(e)}return r.a.createElement(w.a,{p:8},r.a.createElement("h1",{className:"sub-title"},"Nuevo Mes"),r.a.createElement("form",{onSubmit:a(l),className:"form-data"},r.a.createElement(w.a,{p:8},e.elems.map((function(e,t){return r.a.createElement(R,{errors:n,register:s,i:t,name:e.name,value:e.value})})),r.a.createElement(N.a,{mt:4,variantColor:"teal",isLoading:c.isSubmitting,type:"submit"},"Crear"))))},q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:v().currentUser,info:[],readError:null,ultimoMes:[],isLoaded:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null});try{b.ref("expensas").orderByKey().limitToLast(1).on("value",(function(e){e.forEach((function(e){var a=e.val().info;t.setState({info:a,isLoaded:!0})}))}))}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement(U,{elems:this.state.info,user:this.state.user}):r.a.createElement("h1",null,"Loading")}}]),a}(n.Component),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"Listado de Reportes")}}]),a}(n.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"Crear Reporte")}}]),a}(n.Component),W=a(26),J=a(37);function V(){var e=new v.GoogleAuthProvider;return v().signInWithPopup(e)}function G(){var e=new v.GithubAuthProvider;return v().signInWithPopup(e)}var K=a(106),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(J.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(J.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(J.a)(e)),e.githubSignIn=e.githubSignIn.bind(Object(J.a)(e)),e}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,v().signInWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(y.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"githubSignIn",value:function(){var e=Object(y.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container container-form"},r.a.createElement("form",{className:"mt-5 py-5 px-5 login-form",autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement(D.a,{isRequired:!0},r.a.createElement(K.a,{htmlFor:"fname"},"Email"),r.a.createElement(F.a,{onChange:this.handleChange,value:this.state.email,name:"email",type:"email",placeholder:"Email"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement(D.a,{isRequired:!0},r.a.createElement(K.a,{htmlFor:"fname"},"Contrase\xf1a"),r.a.createElement(F.a,{onChange:this.handleChange,value:this.state.password,name:"password",type:"password",placeholder:"contrase\xf1a"}))),r.a.createElement("div",{className:"form-group"},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement(N.a,{mt:4,variantColor:"teal",type:"submit"},"Login"))))}}]),a}(n.Component),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:v().currentUser,meses:[],readError:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null});try{b.ref("expensas").on("value",(function(e){var a=[];e.forEach((function(e){var t=e.val();t.key=e.key,a.push(t)})),t.setState({meses:a})}))}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{p:4},r.a.createElement("h1",{className:"sub-title"},"Local ",this.props.local),r.a.createElement(S.b,{className:"list-expensa"},this.state.meses.map((function(t){return r.a.createElement(S.a,{className:"list-expensa-row"},r.a.createElement("div",{className:"list-expensa-row-elem"},r.a.createElement("h3",null,k(parseInt(t.mes)))),r.a.createElement("div",{className:"list-expensa-row-elem list-expensa-btns"},t.info?r.a.createElement(L,{porcentaje:e.props.porcentaje,data:t,btnName:"Descargar"}):"."))}))))}}]),a}(n.Component);var Y=function(){return r.a.createElement("h1",null,"La p\xe1gina que busca no existe")},X=a(44),$=a(110);function Z(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,["component","authenticated"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function _(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,["component","authenticated"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/home"})}}))}function ee(e){var t="",a=e.match.params.id;return"1"===a&&(t="20"),"2"===a&&(t="30"),"3"!==a&&"5"!==a||(t="17"),"4"===a&&(t="16"),""===t?r.a.createElement(Y,null):r.a.createElement(Q,{porcentaje:t,local:a})}a(97).config();var te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={authenticated:!1,loading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;v().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading?r.a.createElement("div",{className:"spinner-border text-success",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(h.a,null,r.a.createElement(X.a,null,r.a.createElement($.a,null),r.a.createElement("div",{className:"web-body"},r.a.createElement(E,{authenticated:this.state.authenticated}),r.a.createElement(w.a,{p:4},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:g}),r.a.createElement(_,{path:"/login",authenticated:this.state.authenticated,component:H}),r.a.createElement(Z,{path:"/expensas",exact:!0,component:M,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/expensas/crear",component:q,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/expensas/listado",component:M,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/reportes",exact:!0,component:B,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/reportes/crear",component:T,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/reportes/listado",component:B,authenticated:this.state.authenticated}),r.a.createElement(Z,{path:"/local/:id",exact:!0,component:ee,authenticated:this.state.authenticated}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},28:function(e,t,a){},72:function(e,t,a){e.exports=a(100)},77:function(e,t,a){}},[[72,1,3]]]);
//# sourceMappingURL=main.d39310f3.chunk.js.map